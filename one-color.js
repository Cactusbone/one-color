typeof one=="undefined"&&(one={include:function(){}}),function(a,b,c,d,e){var f=[],g=/\s*(\.\d+|\d+(?:\.\d+)?)(%)?\s*/,h=/\s*(\.\d+|\d+(?:\.\d+)?)\s*/,i=new RegExp("^(rgb|hsl|hsv)a?\\("+g.source+","+g.source+","+g.source+"(?:,"+h.source+")?"+"\\)$","i");a=function(b){if(Object.prototype.toString.apply(b)==="[object Array]")return b[0].length===4?new a.RGB(b[0]/255,b[1]/255,b[2]/255,b[3]/255):new a[b[0]](b.slice(1,b.length));if(b.charCodeAt){var e=b.match(i);if(e){var f=e[1].toUpperCase(),g=typeof e[8]=="undefined"?e[8]:d(e[8]),h=f[0]==="H",j=e[3]?100:h?360:255,k=e[5]||h?100:255,l=e[7]||h?100:255;if(typeof a[f]=="undefined")throw new Error("one.color."+f+" is not installed.");return new a[f](d(e[2])/j,d(e[4])/k,d(e[6])/l,g)}b.length<6&&(b=b.replace(/^#?([0-9a-f])([0-9a-f])([0-9a-f])$/i,"$1$1$2$2$3$3"));var m=b.match(/^#?([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])$/i);if(m)return new a.RGB(c(m[1],16)/255,c(m[2],16)/255,c(m[3],16)/255)}else{if(typeof b=="object"&&b.isColor)return b;if(!isNaN(b))return new a.RGB((b&255)/255,((b&65280)>>8)/255,((b&16711680)>>16)/255)}return!1},a.installColorSpace=function(c,d,e){function j(c,d){var e={};e[d.toLowerCase()]=new b("return this.rgb()."+d.toLowerCase()+"();"),a[d].propertyNames.forEach(function(a,c){e[a]=new b("value","isDelta","return this."+d.toLowerCase()+"()."+a+"(value, isDelta);")});for(var f in e)e.hasOwnProperty(f)&&a[c].prototype[f]===undefined&&(a[c].prototype[f]=e[f])}a[c]=new b(d.join(","),"if (Object.prototype.toString.apply("+d[0]+") === '[object Array]') {"+d.map(function(a,b){return a+"="+d[0]+"["+b+"];"}).reverse().join("")+"}"+"if ("+d.filter(function(a){return a!=="alpha"}).map(function(a){return"isNaN("+a+")"}).join("||")+"){"+'throw new Error("[one.color.'+c+']: Invalid color: ("+'+d.join('+","+')+'+")");}'+d.map(function(a){return a==="hue"?"this._hue=hue<0?hue-Math.floor(hue):hue%1":a==="alpha"?"this._alpha=(isNaN(alpha)||alpha>1)?1:(alpha<0?0:alpha);":"this._"+a+"="+a+"<0?0:("+a+">1?1:"+a+")"}).join(";")+";"),a[c].propertyNames=d;var g=a[c].prototype;["valueOf","hex","css","cssa"].forEach(function(a){g[a]=g[a]||(c==="RGB"?g.hex:new b("return this.rgb()."+a+"();"))}),g.isColor=!0,g.equals=function(a,b){typeof b=="undefined"&&(b=1e-10),a=a[c.toLowerCase()]();for(var e=0;e<d.length;e+=1)if(Math.abs(this["_"+d[e]]-a["_"+d[e]])>b)return!1;return!0},g.toJSON=new b("return ['"+c+"', "+d.map(function(a){return"this._"+a},this).join(", ")+"];");for(var h in e)if(e.hasOwnProperty(h)){var i=h.match(/^from(.*)$/);i?a[i[1].toUpperCase()].prototype[c.toLowerCase()]=e[h]:g[h]=e[h]}g[c.toLowerCase()]=function(){return this},g.toString=new b('return "[one.color.'+c+':"+'+d.map(function(a,b){return'" '+d[b]+'="+this._'+a}).join("+")+'+"]";'),d.forEach(function(a,c){g[a]=new b("value","isDelta","if (typeof value === 'undefined') {return this._"+a+";"+"}"+"if (isDelta) {"+"return new this.constructor("+d.map(function(b,c){return"this._"+b+(a===b?"+value":"")}).join(", ")+");"+"}"+"return new this.constructor("+d.map(function(b,c){return a===b?"value":"this._"+b}).join(", ")+");")}),f.forEach(function(a){j(c,a),j(a,c)}),f.push(c)},a.installColorSpace("RGB",["red","green","blue","alpha"],{hex:function(){var a=(e(255*this._red)*65536+e(255*this._green)*256+e(255*this._blue)).toString(16);return"#"+"00000".substr(0,6-a.length)+a},css:function(){return"rgb("+e(255*this._red)+","+e(255*this._green)+","+e(255*this._blue)+")"},cssa:function(){return"rgba("+e(255*this._red)+","+e(255*this._green)+","+e(255*this._blue)+","+this._alpha+")"}})}(one.color,Function,parseInt,parseFloat,Math.round),function(a,b){a.installColorSpace("HSV",["hue","saturation","value","alpha"],{rgb:function(){var c=this._hue,d=this._saturation,e=this._value,f=b.min(5,b.floor(c*6)),g=c*6-f,h=e*(1-d),i=e*(1-g*d),j=e*(1-(1-g)*d),k,l,m;switch(f){case 0:k=e,l=j,m=h;break;case 1:k=i,l=e,m=h;break;case 2:k=h,l=e,m=j;break;case 3:k=h,l=i,m=e;break;case 4:k=j,l=h,m=e;break;case 5:k=e,l=h,m=i}return new a.RGB(k,l,m,this._alpha)},hsl:function(){var b=(2-this._saturation)*this._value,c=this._saturation*this._value,d=b<=1?b:2-b,e;return d<1e-9?e=0:e=c/d,new a.HSL(this._hue,e,b/2,this._alpha)},fromRgb:function(){var c=this._red,d=this._green,e=this._blue,f=b.max(c,d,e),g=b.min(c,d,e),h=f-g,i,j=f===0?0:h/f,k=f;if(h===0)i=0;else switch(f){case c:i=(d-e)/h/6+(d<e?1:0);break;case d:i=(e-c)/h/6+1/3;break;case e:i=(c-d)/h/6+2/3}return new a.HSV(i,j,k,this._alpha)}})}(one.color,Math),one.color.installColorSpace("HSL",["hue","saturation","lightness","alpha"],{hsv:function(){var a=this._lightness*2,b=this._saturation*(a<=1?a:2-a),c;return a+b<1e-9?c=0:c=2*b/(a+b),new one.color.HSV(this._hue,c,(a+b)/2,this._alpha)},rgb:function(){return this.hsv().rgb()},fromRgb:function(){return this.hsv().hsl()}}),typeof module!="undefined"&&(module.exports=one.color);